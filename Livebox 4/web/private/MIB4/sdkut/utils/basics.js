define([],function(){"use strict";return{isOnStb:function(){return typeof SOP!=="undefined"},isOnAndroid:function(){if(typeof window.cordova!=="undefined"){if(device.platform==="Android"){return true}}return false},queue:function(aFuncTab,aThisArg){var task,slice;slice=Array.prototype.slice;function next(){task=aFuncTab.shift();if(task){task.apply(aThisArg,[next].concat(slice.call(arguments,0)))}}next.apply(aThisArg,slice.call(arguments,2))},callback:function(aCallback,aIsAsync,aStatus,aData){var result;if(aCallback){result={status:aStatus};if(aData){result.data=aData}if(aIsAsync){window.setTimeout(function(){aCallback(result)},0)}else{aCallback(result)}}},getCookie:function(aCookieName){var cookieTab,indCookie,itemTab,cookieName;cookieTab=window.document.cookie.split(";");for(indCookie=0;indCookie<cookieTab.length;indCookie+=1){itemTab=cookieTab[indCookie].split("=");cookieName=itemTab[0].replace(/^\s+|\s+$/g,"");if(cookieName===aCookieName){return window.unescape(itemTab[1].replace(/^\s+|\s+$/g,""))}}return""},getParentCookie:function(aCookieName){var cookieTab,indCookie,itemTab,cookieName;cookieTab=window.parent.document.cookie.split(";");for(indCookie=0;indCookie<cookieTab.length;indCookie+=1){itemTab=cookieTab[indCookie].split("=");cookieName=itemTab[0].replace(/^\s+|\s+$/g,"");if(cookieName===aCookieName){return window.unescape(itemTab[1].replace(/^\s+|\s+$/g,""))}}return""},matchCookie:function(aCookieName){var cookieTab,indCookie,itemTab,cookieName,cookieList;cookieList=[];cookieTab=window.document.cookie.split(";");for(indCookie=0;indCookie<cookieTab.length;indCookie+=1){itemTab=cookieTab[indCookie].split("=");cookieName=itemTab[0].replace(/^\s+|\s+$/g,"");if(cookieName.indexOf(aCookieName)>-1){cookieList.push(cookieName)}}return cookieList},setCookie:function(aCookieName,aCookieValue,aLifeTime,aPath){var expirationDate,cookieValue;if(aLifeTime){expirationDate=new Date;expirationDate.setDate(expirationDate.getDate()+aLifeTime*1e3)}else{expirationDate=new Date(2100,0,1)}cookieValue=window.escape(aCookieValue)+"; expires="+expirationDate.toUTCString();if(aPath){cookieValue+=";path="+aPath}window.document.cookie=aCookieName+"="+cookieValue},setParentCookie:function(aCookieName,aCookieValue,aLifeTime,aPath){var expirationDate,cookieValue;if(aLifeTime){expirationDate=new Date;expirationDate.setDate(expirationDate.getDate()+aLifeTime*1e3)}else{expirationDate=new Date(2100,0,1)}cookieValue=window.escape(aCookieValue)+"; expires="+expirationDate.toUTCString();if(aPath){cookieValue+=";path="+aPath}window.parent.document.cookie=aCookieName+"="+cookieValue},deleteCookie:function(aCookieName){window.document.cookie=aCookieName+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;"},generateUUID:function(){var chars,uuid,rnd,r,i;chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");uuid=[];rnd=0;for(i=0;i<36;i+=1){if(i===8||i===13||i===18||i===23){uuid[i]="-"}else if(i===14){uuid[i]="4"}else{if(rnd<=2){rnd=33554432+Math.random()*16777216|0}r=rnd&15;rnd=rnd>>4;uuid[i]=chars[i===19?r&3|8:r]}}return uuid.join("")},getUrlParameters:function(aUrl){var parameterList,urlFiltered,urlTab,argumentTab,indArgument,parameterTab;parameterList={};urlFiltered=aUrl.split("#");urlTab=urlFiltered[0].split("?");if(urlTab.length>1){argumentTab=urlTab[1].split("&");for(indArgument=0;indArgument<argumentTab.length;indArgument+=1){parameterTab=argumentTab[indArgument].split("#")[0].split("=");if(parameterTab.length>1){parameterList[window.unescape(parameterTab[0])]=window.unescape(parameterTab[1]);if(parameterList[window.unescape(parameterTab[0])]==="false"){parameterList[window.unescape(parameterTab[0])]=false}else if(parameterList[window.unescape(parameterTab[0])]==="true"){parameterList[window.unescape(parameterTab[0])]=true}}else{parameterList[window.unescape(parameterTab[0])]=true}}}return parameterList},settleUrl:function(aUrl){var hrefTab,urlTab;if(aUrl.indexOf("://")>-1){return aUrl}hrefTab=window.document.location.href.split("/");hrefTab.pop();urlTab=aUrl.split("/");while(urlTab.length>0&&urlTab[0]===".."){hrefTab.pop();urlTab.shift()}return hrefTab.join("/")+"/"+urlTab.join("/")},formatNumber:function(aNumber,aLength){var value,indLen;value=aNumber.toString();for(indLen=0;indLen<=aLength;indLen+=1){if(value.length<indLen){value="0"+value}}return value},formatTime:function(aTimestamp,aFormat){var date,temp,nbDay,nbHour,nbMin,nbSec;if(aFormat===3||aFormat===4||aFormat===5){return this.formatDate(aTimestamp,aFormat)}if(aFormat===2){nbDay=parseInt(aTimestamp/86400,10);temp=aTimestamp%86400;nbHour=parseInt(temp/3600,10);temp=aTimestamp%3600;nbMin=parseInt(temp/60,10);nbSec=temp%60;if(nbDay===0){if(nbHour===0){if(nbMin===0){return nbSec+"s"}return nbMin+"m"+(nbSec<10?"0"+nbSec:nbSec)+"s"}return nbHour+"h"+(nbMin<10?"0"+nbMin:nbMin)+"m"+(nbSec<10?"0"+nbSec:nbSec)+"s"}return nbDay+"d "+nbHour+"h"+(nbMin<10?"0"+nbMin:nbMin)+"m"+(nbSec<10?"0"+nbSec:nbSec)+"s"}date=new Date(aTimestamp*1e3);nbHour=date.getUTCHours();nbMin=date.getUTCMinutes();nbSec=date.getUTCSeconds();if(nbHour<10){nbHour="0"+nbHour}if(nbMin<10){nbMin="0"+nbMin}if(nbSec<10){nbSec="0"+nbSec}if(aFormat===0){return nbHour+":"+nbMin}if(aFormat===1){return nbHour+":"+nbMin+":"+nbSec}if(aFormat===6){return nbHour+"h"+nbMin}return""},formatDate:function(aTimestamp,aFormat){var date;if(aFormat===0||aFormat===1||aFormat===2){return this.formatTime(aTimestamp,aFormat)}date=new Date(aTimestamp*1e3);if(aFormat===3){return this.formatNumber(date.getDate(),2)+"/"+this.formatNumber(date.getMonth()+1,2)}if(aFormat===4){return this.formatNumber(date.getDate(),2)+"/"+this.formatNumber(date.getMonth()+1,2)+"/"+date.getFullYear()}if(aFormat===5){return this.formatDate(date.getTime()/1e3,4)+" "+this.formatDate(date.getTime()/1e3,0)}if(aFormat===6){return date.getFullYear()+this.formatNumber(date.getMonth()+1,2)+this.formatNumber(date.getDate(),2)+this.formatNumber(date.getHours(),2)+this.formatNumber(date.getMinutes(),2)+this.formatNumber(date.getSeconds(),2)}return""},cloneObj:function(obj){var copy,i,len,attr;if(obj===null||"object"!==typeof obj){return obj}if(obj instanceof Date){copy=new Date;copy.setTime(obj.getTime());return copy}if(obj instanceof Array){copy=[];for(i=0,len=obj.length;i<len;i+=1){copy[i]=this.cloneObj(obj[i])}return copy}if(obj instanceof Object){copy={};for(attr in obj){if(obj.hasOwnProperty(attr)){copy[attr]=this.cloneObj(obj[attr])}}return copy}throw new Error("Unable to copy object")},stripLines:function(string){return string.replace(/(\r\n|\n|\r|\t)/gm,"")},escapeString:function(type,str,unescape){function addslashes(str){return(str+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0").replace(/\u000A/g,"\\n").replace(/\u000B/g,"\\t").replace(/\u000C/g,"\\f").replace(/\u000D/g,"\\r")}function stripslashes(str){return(str+"").replace(/\\(.?)/g,function(s,n1){switch(n1){case"\\":return"\\";case"0":return"\x00";case"n":return"\n";case"t":return"";case"f":return"\f";case"r":return"\r";case"":return"";default:return n1}})}function array_flip(trans){var key,tmp_ar={};for(key in trans){if(trans.hasOwnProperty(key)){tmp_ar[trans[key]]=stripslashes(key)}}return tmp_ar}var str_buffer=str;if(type==="js"){if(unescape===1){str_buffer=stripslashes(str_buffer)}else{str_buffer=addslashes(str_buffer)}}else{var html_array={"&":"&amp",'"':"&quot","<":"&lt",">":"&gt"};var uri_array={"%":"%25"," ":"%20","!":"%21","@":"%40","#":"%23","\\$":"%24","\\^":"%5E","&":"%26","\\*":"%2A","\\(":"%28","\\)":"%29","-":"%2D",_:"%5F","=":"%3D","\\+":"%2B",":":"%3A",";":"%3B","\\.":"%2E",'"':"%22","'":"%27","\\\\":"%5C","/":"%2F","\\?":"%3F","<":"%3C",">":"%3E","~":"%7E","\\[":"%5B","\\]":"%5D","\\{":"%7B","\\}":"%7D","`":"%60"};var array_used={};var array_used_temp={};if(type==="html"){array_used_temp=html_array}else if(type==="uri"){array_used_temp=uri_array}if(unescape===1){array_used=array_flip(array_used_temp)}else{array_used=array_used_temp}for(var val in array_used){if(array_used.hasOwnProperty(val)){str_buffer=str_buffer.replace(new RegExp(val,"g"),array_used[val])}}}return str_buffer},unescapeString:function(type,str){return this.escapeString(type,str,1)},isSubList:function(aList,aBigList){var i;for(i=0;i<aList.length;i+=1){if(aBigList.indexOf(aList[i])<0){return false}}return true},metadataMap:{USI:"usi",service_name:"serviceName",media_type:"type",src_type:"source",status:"status",status_error_code:"errorCode",size:"size",nb_evt:"nbProgram",main_event_id:"mainProgramId",title:"title",start_date_time:"start",end_date_time:"end",duration:"duration",user_nibble:"genre",content_nibble:"category",parental_rating:"parentalRating",short_sum:"brief",long_sum:"description",video_format:"videoFormat",video_resolution:"videoResolution",audio_lang:"audioLanguageList",audio_coding:"audioCodec",video_coding:"videoCodec",subtitles_lang:"subtitleLanguageList",thumbnail:"imageUrl"},eitProperties:{event_id:"id",title:"title",start_time:"start",end_time:"end",duration:"duration",parental_level:"parentalRating",short_sum:"brief",long_sum:"description",contentnibble1:"genre",contentnibble2:"category"},keyMappingList:{0:"D0",1:"D1",2:"D2",3:"D3",4:"D4",5:"D5",6:"D6",7:"D7",8:"D8",9:"D9","P+":"PNEXT","P-":"PPREV","VOL+":"VOLUP","VOL-":"VOLDOWN",MUTE:"MUTE",PLAY:"PLAY",STOP:"STOP",REC:"REC",FF:"FWD",FR:"RWD",NEXT:"NEXT",PREV:"PREVIOUS",UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",OK:"OK",BACK:"BACK",QUIT:"EXIT",MENU:"MENU",POWER:"STANDBY",INFO:"INFO",LIST:"LIST",GUIDE:"GUIDE",VOD:"VOD",TV:"TV",RED:"RED",GREEN:"GREEN",YELLOW:"YELLOW",BLUE:"BLUE",ZOOM:"ZOOM",CANCEL:"CANCEL",SETTINGS:"SETTINGS",FAV:"FAVORITES",SEARCH:"SEARCH",HELP:"HELP",TTX:"TEXT",OPTION:"OPTION"},reverseKeyMappingList:{D0:"0",D1:"1",D2:"2",D3:"3",D4:"4",D5:"5",D6:"6",D7:"7",D8:"8",D9:"9",PNEXT:"P+",PPREV:"P-",VOLUP:"VOL+",VOLDOWN:"VOL-",MUTE:"MUTE",PLAY:"PLAY",STOP:"STOP",REC:"REC",FWD:"FF",RWD:"FR",NEXT:"NEXT",PREVIOUS:"PREV",UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",OK:"OK",BACK:"BACK",EXIT:"QUIT",MENU:"MENU",STANDBY:"POWER",INFO:"INFO",LIST:"LIST",GUIDE:"GUIDE",VOD:"VOD",TV:"TV",RED:"RED",GREEN:"GREEN",YELLOW:"YELLOW",BLUE:"BLUE",ZOOM:"ZOOM",CANCEL:"CANCEL",SETTINGS:"SETTINGS",FAVORITES:"FAV",SEARCH:"SEARCH",HELP:"HELP",TEXT:"TTX",OPTION:"OPTION"}}});