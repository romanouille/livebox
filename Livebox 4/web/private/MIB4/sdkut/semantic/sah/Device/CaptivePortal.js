define(["utils/console","engine/callStack"],function(console,callStack){"use strict";return{getErrorCode:{name:"Retrieves the captive portal error code",description:"This method retrieves the captive portal error code.",fields:{uuid:null,nbStep:0,mxStep:0,status:0,data:{}},call:function(aStep,aResult){var result;if(aStep==="0"){this.fields.uuid=aResult.uuid;this.fields.status=0;this.fields.nbStep=0;this.fields.mxStep=0;this.fields.data=null;this.fields.mxStep+=1;callStack.push("api","pcb.NMC.getPrimaryErrorCode","1",this)}else{this.fields.nbStep+=1;switch(aStep){case"1":this.fields.data={};this.fields.data.errorCode=aResult.data;break;default:console.warn("Unexpected step '"+aStep+"' in call stack");this.fields.nbStep-=1;break}}if(this.fields.nbStep>=this.fields.mxStep){result={status:this.fields.status};if(this.fields.status===0&&this.fields.data){result.data=this.fields.data}callStack.popAll("api",result,this.fields.uuid)}}}}});