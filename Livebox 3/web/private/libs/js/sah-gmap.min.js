SAH.Device=function(a){var b=this;if(typeof a=="object"){SAH.Object.call(b,"Devices.Device."+a.Key);if(a.Name){b.loaded=true}b.data=a||{};b.data.Tags=b.data.Tags.split(" ")}else{if(typeof a=="string"){SAH.Object.call(b,"Devices.Device."+a);b.invoke("get").then(function(c,d,e){b._loaded=true;b.data=c||{}})}}b.load=function(){var c=$.Deferred();b.invoke("get").then(function(d,e,f){b._loaded=true;b.data=d||{}});return c.promise()};b.parameters=function(){return b.data};b.parameter=function(c){return b.data[c]};b.name=function(){return b.data.Name};b.key=function(){return b.data.Key};b.containsTag=function(c){if($.inArray(c,b.data.Tags)!=-1){return true}return false};b.isActive=function(){return b.data.Active};b.type=function(){if(b.data.DeviceType!=undefined&&b.data.DeviceType.length!=0){return b.data.DeviceType}if(b.data.DeviceTypes!=undefined&&b.data.DeviceTypes.length!=0){return b.data.DeviceTypes[0].Type}if(b.containsTag("self")==true){if(b.containsTag("interface")==true){return"Interface"}if(b.containsTag("hgw")==true){return"Router"}}return"Computer"};b.setActive=function(d){var c={};c.active=d;return b.invoke("setActive",c)};b.hasTag=function(c,f,e){var d={};d.tag=c;d.expression=f||"";d.traverse=e||"this";return b.invoke("hasTag",d)};b.setTag=function(c,f,e){var d={};d.tag=c;d.expression=f||"";d.traverse=e||"this";return b.invoke("setTag",d)};b.clearTag=function(c,f,e){var d={};d.tag=c;d.expression=f||"";d.traverse=e||"this";return b.invoke("clearTag",d)};b.getFirstParameter=function(f,e,d){var c={};c.parameter=f;c.expression=e||"";c.traverse=d||"this";return b.invoke("getFirstParameter",c)};b.getParameters=function(f,e,d){var c={};c.parameter=f;c.expression=e||"";c.traverse=d||"this";return b.invoke("getParameters",c)};b.topology=function(h,g,c){var d=$.Deferred();var f={};var e=function(m){var j={};for(var l=0;l<m.length;l++){var k=m[l].Children||[];j[m[l].Key]=new SAH.Device(m[l]);j[m[l].Key].Children=e(k)}return j};f.expression=h||"";f.traverse=g||"down";f.flags=c||"";b.invoke("topology",f).then(function(i,k,l){var j=e(i);d.resolve(j)},function(i,j,k){d.reject(k)});return d.promise()};b.isLinkedTo=function(d,e){var c={};c.device=d;c.traverse=e||"up";return b.invoke("isLinkedTo",c)};b.setName=function(c,e){var d={};d.name=c;d.source=e||"webui";return b.invoke("setName",d)};b.delName=function(d){var c={};c.source=d;return b.invoke("removeName",c)};b.setType=function(c,e){var d={};d.type=c;d.source=e||"webui";return b.invoke("setType",d)};b.removeType=function(c,e){var d={};d.type=c;d.source=e||"webui";return b.invoke("removeType",d)}};SAH.Device.prototype=Object.create(SAH.Object.prototype);SAH.Devices=new SAH.Object("Devices");SAH.Devices.get=function(d,a){var e=this;var b=$.Deferred();var c={};c.expression=d||"";c.flags=a||"";e.invoke("Devices","get",c).then(function(f,j,k){var g={};for(var h=0;h<f.length;h++){g[f[h].Key]=new SAH.Device(f[h])}b.resolve(g)},function(f,g,h){b.reject(h)});return b.promise()};SAH.Devices.find=function(c){var d=this;var a=$.Deferred();var b={};b.expression=c||"";d.invoke("Devices","find",b).then(function(e,f,g){a.resolve(e)},function(e,f,g){a.reject(g)});return a.promise()};